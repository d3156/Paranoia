# Paranoia Messenger — Архитектура

Paranoia — это безопасный мессенджер в стиле **zero-trust**, полностью реализованный как плагин для PluginCore.  
Все данные пользователей хранятся **только в зашифрованном виде**, сервер не видит содержимого сообщений и не хранит приватные ключи.

---

## Основные принципы

- **No-log**: сервер не хранит и не логирует содержимое сообщений, только зашифрованные пакеты.
- **End-to-end шифрование**: клиенты используют поточное шифрование с **предварительно согласованными ключами**.
- **Zero-trust сервер**: сервер — “dumb relay”, проверяет только подписи пользователей и маршрутизирует зашифрованные пакеты.
- **Удаляемая история**: пользователи могут полностью удалить свои данные с сервера через `/determinate`.
- **Маскировка под сайт**: доступ к серверу идёт через Nginx по HTTPS с cokie, чтобы при отсутствии cokie сервер выглядел как обычный веб-сайт.
- **Минимальная атака на приватность**: сервер не может узнать IP или содержимое сообщений пользователей.

---

## Архитектурная схема (логическая)

1. **Администратор**:
   - Регистрируется при создании сервера через основной конфиг.
   - Только он может регистрировать новых пользователей.

2. **Клиент**:
   - сам согласует ключи с собеседниками наиболее доверенным для него способом (при личной встрече);
   - шифрует и подписывает сообщения для каждого собеседника своим ключом;
   - отправляет на сервер через HTTPS (Nginx) с указанием cokie.

3. **Сервер Paranoia** (плагин PluginCore):
   - хранит пакеты как принял, не может расшифровать;
   - проверяет подписи пользователей;
   - маршрутизирует пакеты;
   - поддержка multy-clients, можно получать сообщения на разных устройствах;
   - поддерживает удаление данных пользователя;
   - полностью dumb.

4. **Сторонняя инфраструктура** (Nginx, HTTPS):
   - скрывает сервер под обычным веб-трафиком;
   - TLS шифрует соединения;
   - служит как reverse-proxy для Paranoia плагина.

---

## Ценности

- **Конфиденциальность**: сервер не имеет доступа к содержимому.
- **Контроль пользователя**: только пользователь владеет своими ключами и может удалять свои данные.
- **Безопасность по дизайну**: zero-trust, end-to-end, no-log, минимальные метаданные.
- **Простая интеграция**: плагинная архитектура позволяет масштабировать и расширять функционал без изменения ядра.
